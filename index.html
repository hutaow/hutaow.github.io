
<!DOCTYPE HTML>

<html>

<head>
	<meta charset="utf-8">
	<title>Tony Wang</title>
	<meta name="author" content="Wang Tao">

	
	<meta name="description" content="Sep 6th, 2013 OpenWRT TP-WR703n安装OpenWRT记录 1 安装OpenWRT 1.1 下载并刷新固件 如果以前没刷过OpenWRT，需要升级factory固件，点击这里下载。 如果之前已经安装过了OpenWRT，则直接更新sysupgrade固件即可，点击这里下载 &hellip;">
	

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="/atom.xml" rel="alternate" title="Tony Wang" type="application/atom+xml">
	
	<link rel="canonical" href="http://hutaow.github.io/">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="/stylesheets/font-awesome.min.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-17662168-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>


</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><div class="profilepic">
	<script src="/javascripts/md5.js"></script>
	<script type="text/javascript">
		$(function(){
			$('.profilepic').append("<img src='http://www.gravatar.com/avatar/" + MD5("hutaow (at) hotmail.com") + "?s=160' alt='Profile Picture' style='width: 160px;' />");
		});
	</script>
</div>
<hgroup>
  <h1><a href="/">Tony Wang</a></h1>
  
    <h2>open source, world shares.</h2>
  
</hgroup>

<nav id="main-nav"><ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
<nav id="sub-nav">
	<div class="social">
		
		<a class="weibo" href="http://www.weibo.com/hutaow" title="Weibo">Weibo</a>
		
		
		<a class="facebook" href="http://www.facebook.com/hutaow" title="Facebook">Facebook</a>
		
		
		
		<a class="twitter" href="http://twitter.com/hutaow" title="Twitter">Twitter</a>
		
		
		
		
		
		<a class="linkedin" href="http://www.linkedin.com/in/hutaow" title="LinkedIn">LinkedIn</a>
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
</nav>
</header>				
			</div>
		</div>	
		<div class="mid-col">
			
				
			
			<div class="mid-col-container">
				<div id="content" class="inner">
<div itemscope itemtype="http://schema.org/Blog">


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2013-09-06T23:16:00+08:00" data-updated="true" itemprop="datePublished">Sep 6<span>th</span>, 2013</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/openwrt/'>OpenWRT</a>


</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2013/09/06/install-openwrt/" itemprop="url">TP-WR703n安装OpenWRT记录</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<h3>1 安装OpenWRT</h3>

<h4>1.1 下载并刷新固件</h4>

<p>如果以前没刷过OpenWRT，需要升级factory固件，<a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/openwrt-ar71xx-generic-tl-wr703n-v1-squashfs-factory.bin" title="openwrt-ar71xx-generic-tl-wr703n-v1-squashfs-factory.bin">点击这里下载</a>。</p>

<p>如果之前已经安装过了OpenWRT，则直接更新sysupgrade固件即可，<a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/openwrt-ar71xx-generic-tl-wr703n-v1-squashfs-sysupgrade.bin" title="openwrt-ar71xx-generic-tl-wr703n-v1-squashfs-sysupgrade.bin">点击这里下载</a>。</p>

<p>注意升级的时候要将原配置删除，避免配置文件互相影响，固件刷新完成后，路由器会自动重启。</p>

<h4>1.2 登陆路由器</h4>

<p>OpenWRT主线固件的无线信号是默认关闭的，这个时候需要找跟网线将电脑和路由器连接上，然后将电脑的IP地址设置为静态的&#8221;192.168.1.100&#8221;，然后用Telnet访问&#8221;192.168.1.1&#8221;，正确的情况下，会看到如下界面：
<img class="center" src="/images/articles/201309/install_openwrt_01_first_login.png" title="First Login" ></p>

<h4>1.3 打开无线信号</h4>

<p>编辑&#8221;/etc/config/wireless&#8221;文件，将&#8221;option disabled 1&#8221;这一行注掉，或者直接删除。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>config wifi-device radio0
</span><span class='line'>    option type     mac80211
</span><span class='line'>    option channel  11
</span><span class='line'>    option hwmode   11ng
</span><span class='line'>    option path     'platform/ar933x_wmac'
</span><span class='line'>    option htmode   HT20
</span><span class='line'>    list ht_capab   SHORT-GI-20
</span><span class='line'>    list ht_capab   SHORT-GI-40
</span><span class='line'>    list ht_capab   RX-STBC1
</span><span class='line'>    list ht_capab   DSSS_CCK-40
</span><span class='line'>    # REMOVE THIS LINE TO ENABLE WIFI:
</span><span class='line'>    # option disabled 1
</span><span class='line'>
</span><span class='line'>config wifi-iface
</span><span class='line'>    option device   radio0
</span><span class='line'>    option network  lan
</span><span class='line'>    option mode     ap
</span><span class='line'>    option ssid     OpenWrt
</span><span class='line'>    option encryption none</span></code></pre></td></tr></table></div></figure>


<h4>1.4 外网接入配置</h4>

<p>编辑&#8221;/etc/config/network&#8221;文件，将原&#8221;lan&#8221;区段中的&#8221;ifname&#8221;注掉，新增&#8221;wan&#8221;段，如果是用宽带拨号上网，则配置成下面的样子（其中USERNAME和PASSWORD分别是拨号的用户名和密码）：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>config interface 'loopback'
</span><span class='line'>  option ifname 'lo'
</span><span class='line'>  option proto 'static'
</span><span class='line'>  option ipaddr '127.0.0.1'
</span><span class='line'>  option netmask '255.0.0.0'
</span><span class='line'>
</span><span class='line'>config globals 'globals'
</span><span class='line'>  option ula_prefix 'fd4f:26fb:9d78::/48'
</span><span class='line'>
</span><span class='line'>config interface 'lan'
</span><span class='line'>  # option ifname 'eth0'
</span><span class='line'>  option type 'bridge'
</span><span class='line'>  option proto 'static'
</span><span class='line'>  option ipaddr '192.168.1.1'
</span><span class='line'>  option netmask '255.255.255.0'
</span><span class='line'>  option ip6assign '60'
</span><span class='line'>
</span><span class='line'>config interface 'wan'
</span><span class='line'>  option ifname 'eth0'
</span><span class='line'>  option proto 'pppoe'
</span><span class='line'>  option username 'USERNAME'
</span><span class='line'>  option password 'PASSWORD'</span></code></pre></td></tr></table></div></figure>


<p>如果不需要拨号，直接通过其它路由器连接，则将&#8221;wan&#8221;区段配置成下面的样子：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>config interface 'wan'
</span><span class='line'>  option ifname 'eth0'
</span><span class='line'>  option proto 'dhcp'</span></code></pre></td></tr></table></div></figure>


<h4>1.5 重启路由器，完成OpenWRT的安装</h4>

<p>执行reboot命令重启路由器，将外网线连上，重启后搜索无线信号，就可以看到&#8221;OpenWRT&#8221;的信号了，连接上去，不出意外的话，这个时候电脑已经可以上网了。</p>

<h3>2 将OpenWRT扩展至U盘</h3>

<h4>2.1 安装基本软件</h4>

<p>再次用Telnet访问&#8221;192.168.1.1&#8221;，执行下面的命令，将挂载U盘相关的基本软件安装上。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>opkg update
</span><span class='line'>opkg install block-mount kmod-fs-ext4 kmod-usb-ohci kmod-usb-storage e2fsprogs</span></code></pre></td></tr></table></div></figure>


<h4>2.2 准备挂载U盘</h4>

<p>将U盘插上，执行&#8221;block info&#8221;命令，看下U盘是否已被识别，如下图，其中中sda1、sda2、sda5为U盘分区：
<img class="center" src="/images/articles/201309/install_openwrt_02_block_info.png" title="Block Info" ></p>

<h4>2.3 拷贝系统文件</h4>

<p>执行如下命令，将路由器ROM中的系统文件全部拷贝到U盘中：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>mount /dev/sda1 /mnt 
</span><span class='line'>mkdir /tmp/vroot 
</span><span class='line'>mount --bind / /tmp/vroot 
</span><span class='line'>cp -a /tmp/vroot/* /mnt 
</span><span class='line'>sync 
</span><span class='line'>umount /tmp/vroot</span></code></pre></td></tr></table></div></figure>


<h4>2.4 设置交换空间（可选）</h4>

<p>U盘在分区时可以预留一个交换分区，防止路由器内存不足，这里预留的交换分区是sda5，执行下面的命令：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>swapon /dev/sda5</span></code></pre></td></tr></table></div></figure>


<h4>2.5 保存挂载信息</h4>

<p>将当前挂载状态写入fstab文件中：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>block detect &gt; /etc/config/fstab</span></code></pre></td></tr></table></div></figure>


<p>然后修改&#8221;/etc/config/fstab&#8221;文件，将sda1的挂载点设置为&#8221;/&ldquo;，并将&#8221;option enabled&#8221;置1，配置类似下面的样子：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>config global
</span><span class='line'>  option anon_swap '0'
</span><span class='line'>  option anon_mount '0'
</span><span class='line'>  option auto_swap '1'
</span><span class='line'>  option auto_mount '1'
</span><span class='line'>  option delay_root '5'
</span><span class='line'>  option check_fs '0'
</span><span class='line'>
</span><span class='line'>config mount
</span><span class='line'>  option target '/'
</span><span class='line'>  option uuid '413b964c-9c9c-4af4-8966-daf04ee53414'
</span><span class='line'>  option enabled '1'
</span><span class='line'>  option fstype 'ext4'
</span><span class='line'>
</span><span class='line'>config mount
</span><span class='line'>  option target '/home'
</span><span class='line'>  option uuid 'e7052ed0-b883-4375-9f31-5648ea8f2948'
</span><span class='line'>  option enabled '1'
</span><span class='line'>  option fstype 'ext4'
</span><span class='line'>
</span><span class='line'>config swap
</span><span class='line'>  option uuid '58713d02-e9de-4c23-a56b-a5ea3d3dfcf0'
</span><span class='line'>  option enabled '1'</span></code></pre></td></tr></table></div></figure>


<p>如果U盘只有一个分区，会只看到一个sda1(&ldquo;/&rdquo;)，其它诸如sda2(&ldquo;/home&rdquo;)、sda5(&ldquo;swap&rdquo;)需要额外分区才能看到。</p>

<h4>2.6 重启路由器，完成OpenWRT的扩展</h4>

<p>重启路由器，再次&#8221;df -h&#8221;一下，可以看到路由器的空间已经扩展成功了。
<img class="center" src="/images/articles/201309/install_openwrt_03_df.png" title="DF Info" ></p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2008-08-14T19:05:00+08:00" data-updated="true" itemprop="datePublished">Aug 14<span>th</span>, 2008</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/programming/'>Programming</a>


</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2008/08/14/convert-between-byte-array-and-hex-string/" itemprop="url">Java中十六进制字符串与字节数组的相互转换</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>原理很简单，直接贴源代码吧。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="cm">/**</span>
</span><span class='line'><span class="cm"> * @author wangtao</span>
</span><span class='line'><span class="cm"> * @version 2008.8.14</span>
</span><span class='line'><span class="cm"> */</span>
</span><span class='line'><span class="kd">public</span><span class="err"> </span><span class="kd">class</span> <span class="nc">Util</span> <span class="o">{</span>
</span><span class='line'><span class="err">    </span><span class="kd">public</span><span class="err"> </span><span class="kd">static</span><span class="err"> </span><span class="kt">char</span><span class="o">[]</span> <span class="n">hexDigits</span> <span class="o">=</span><span class="err"> </span>
</span><span class='line'><span class="err">   </span> <span class="o">{</span><span class="sc">&#39;0&#39;</span><span class="o">,</span> <span class="sc">&#39;1&#39;</span><span class="o">,</span> <span class="sc">&#39;2&#39;</span><span class="o">,</span> <span class="sc">&#39;3&#39;</span><span class="o">,</span> <span class="sc">&#39;4&#39;</span><span class="o">,</span> <span class="sc">&#39;5&#39;</span><span class="o">,</span> <span class="sc">&#39;6&#39;</span><span class="o">,</span> <span class="sc">&#39;7&#39;</span><span class="o">,</span> <span class="sc">&#39;8&#39;</span><span class="o">,</span> <span class="sc">&#39;9&#39;</span><span class="o">,</span> <span class="sc">&#39;A&#39;</span><span class="o">,</span> <span class="sc">&#39;B&#39;</span><span class="o">,</span> <span class="sc">&#39;C&#39;</span><span class="o">,</span> <span class="sc">&#39;D&#39;</span><span class="o">,</span> <span class="sc">&#39;E&#39;</span><span class="o">,</span> <span class="sc">&#39;F&#39;</span><span class="o">};</span>
</span><span class='line'>
</span><span class='line'><span class="err">   </span> <span class="cm">/**</span>
</span><span class='line'><span class="cm">     * @notes 字节数组转化为字符串</span>
</span><span class='line'><span class="cm">     * @param bytes</span>
</span><span class='line'><span class="cm">     * @return String</span>
</span><span class='line'><span class="cm">     */</span>
</span><span class='line'><span class="err">    </span><span class="kd">public</span><span class="err"> </span><span class="kd">static</span><span class="err"> </span><span class="n">String</span> <span class="n">toHexString</span><span class="o">(</span><span class="kt">byte</span><span class="o">[]</span> <span class="n">bytes</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'><span class="err">   </span> <span class="err">   </span> <span class="kt">char</span><span class="o">[]</span> <span class="n">chars</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="o">[</span><span class="n">bytes</span><span class="o">.</span><span class="na">length</span> <span class="o">*</span> <span class="mi">2</span><span class="o">];</span>
</span><span class='line'>
</span><span class='line'><span class="err">   </span> <span class="err">   </span> <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">bytes</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
</span><span class='line'><span class="err">   </span> <span class="err">   </span> <span class="err">   </span> <span class="kt">int</span> <span class="n">b</span> <span class="o">=</span> <span class="n">bytes</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
</span><span class='line'><span class="err">   </span> <span class="err">   </span> <span class="err">   </span> <span class="n">chars</span><span class="o">[</span><span class="n">i</span> <span class="o">*</span> <span class="mi">2</span><span class="o">]</span> <span class="o">=</span> <span class="n">Util</span><span class="o">.</span><span class="na">hexDigits</span><span class="o">[(</span><span class="n">b</span> <span class="o">&amp;</span> <span class="mh">0xF0</span><span class="o">)</span> <span class="o">&gt;&gt;</span> <span class="mi">4</span><span class="o">];</span>
</span><span class='line'><span class="err">   </span> <span class="err">   </span> <span class="err">   </span> <span class="n">chars</span><span class="o">[</span><span class="n">i</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="n">Util</span><span class="o">.</span><span class="na">hexDigits</span><span class="o">[</span><span class="n">b</span> <span class="o">&amp;</span> <span class="mh">0x0F</span><span class="o">];</span>
</span><span class='line'><span class="err">   </span> <span class="err">   </span> <span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="err">   </span> <span class="err">   </span> <span class="k">return</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">chars</span><span class="o">);</span>
</span><span class='line'><span class="err">   </span> <span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="err">   </span> <span class="cm">/**</span>
</span><span class='line'><span class="cm">     * @notes 字符串转化为字节数组</span>
</span><span class='line'><span class="cm">     * @param str</span>
</span><span class='line'><span class="cm">     * @return byte[]</span>
</span><span class='line'><span class="cm">     */</span>
</span><span class='line'><span class="err">    </span><span class="kd">public</span> <span class="kd">static</span><span class="err"> </span><span class="kt">byte</span><span class="o">[]</span> <span class="n">toByteArray</span><span class="o">(</span><span class="n">String</span> <span class="n">str</span><span class="o">)</span> <span class="o">{</span><span class="err"> </span>
</span><span class='line'><span class="err">   </span> <span class="err">   </span> <span class="kt">int</span> <span class="n">length</span> <span class="o">=</span> <span class="n">str</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">/</span> <span class="mi">2</span><span class="o">;</span>
</span><span class='line'><span class="err">   </span> <span class="err">   </span> <span class="kt">byte</span><span class="o">[]</span> <span class="n">bytes</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="n">length</span><span class="o">];</span>
</span><span class='line'><span class="err">   </span> <span class="err">   </span> <span class="kt">byte</span><span class="o">[]</span> <span class="n">source</span> <span class="o">=</span> <span class="n">str</span><span class="o">.</span><span class="na">getBytes</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'><span class="err">   </span> <span class="err">   </span> <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">bytes</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="o">++</span><span class="n">i</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'><span class="err">   </span> <span class="err">   </span> <span class="err">   </span> <span class="kt">byte</span> <span class="n">bh</span> <span class="o">=</span> <span class="n">Byte</span><span class="o">.</span><span class="na">decode</span><span class="o">(</span><span class="s">&quot;0x&quot;</span> <span class="o">+</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="k">new</span> <span class="kt">byte</span><span class="o">[]{</span><span class="n">source</span><span class="o">[</span><span class="n">i</span> <span class="o">*</span> <span class="mi">2</span><span class="o">]})).</span><span class="na">byteValue</span><span class="o">();</span>
</span><span class='line'><span class="err">   </span> <span class="err">   </span> <span class="err">   </span> <span class="n">bh</span> <span class="o">=</span> <span class="o">(</span><span class="kt">byte</span><span class="o">)(</span><span class="n">bh</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="o">);</span>
</span><span class='line'><span class="err">   </span> <span class="err">   </span> <span class="err">   </span> <span class="kt">byte</span> <span class="n">bl</span> <span class="o">=</span> <span class="n">Byte</span><span class="o">.</span><span class="na">decode</span><span class="o">(</span><span class="s">&quot;0x&quot;</span> <span class="o">+</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="k">new</span> <span class="kt">byte</span><span class="o">[]{</span><span class="n">source</span><span class="o">[</span><span class="n">i</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="o">]})).</span><span class="na">byteValue</span><span class="o">();</span>
</span><span class='line'><span class="err">   </span> <span class="err">   </span> <span class="err">   </span> <span class="n">bytes</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="o">(</span><span class="kt">byte</span><span class="o">)(</span><span class="n">bh</span> <span class="o">^</span> <span class="n">bl</span><span class="o">);</span>
</span><span class='line'><span class="err">   </span> <span class="err">   </span> <span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="err">   </span> <span class="err">   </span> <span class="k">return</span> <span class="n">bytes</span><span class="o">;</span>
</span><span class='line'><span class="err">   </span> <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>




		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2008-08-10T15:12:00+08:00" data-updated="true" itemprop="datePublished">Aug 10<span>th</span>, 2008</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/linux/'>Linux</a>


</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2008/08/10/config-proxy-in-linux-terminal/" itemprop="url">终端下使用代理的方法</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>很长时间都不知道怎么设置，今天突然发现，设置四个环境变量就行了，&#8221;HTTP_PROXY&#8221;、&#8221;http_proxy&#8221;和&#8221;FTP_PROXY&#8221;、&#8221;ftp_proxy&#8221;，在&#8221;~/.bash_profile&#8221;中添加以下几行：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>export HTTP_PROXY=http://username:password@proxy.server:8080
</span><span class='line'>export FTP_PROXY=http://username:password@proxy.server:8080
</span><span class='line'>export http_proxy=http://username:password@proxy.server:8080
</span><span class='line'>export ftp_proxy=http://username:password@proxy.server:8080</span></code></pre></td></tr></table></div></figure>


<p>其中，username和password是用户名和密码，用在需要验证的代理服务器上；proxy.server是代理服务器的地址，后面的8080是端口号。</p>

<p>修改保存后重启终端或在执行&#8221;source ~/.bash_proxy&#8221;生效。</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2008-07-29T11:34:00+08:00" data-updated="true" itemprop="datePublished">Jul 29<span>th</span>, 2008</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/linux/'>Linux</a>


</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2008/07/29/slove-the-problem-that-kde-can-not-start-in-fedora-9/" itemprop="url">Fedora 9 无法启动KDE的解决办法</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>今天突然想再尝试一下KDE的环境，而且传说中的KDE4出了那么久，还一直没有用过，于是兴致勃勃的安装上了KDE的桌面环境。Logout->KDE，结果却报出个错误，说&#8221;Could not start kstartupconfig4. Check your installation&#8221;，无语，难道是我少装了什么东西？</p>

<p>按照它说的检查，结果没问题啊，kstartupconfig4已经安装好了，于是又上网查，google出好多解决办法，不过基本上都是用&#8221;chown&#8221;改变&#8221;~/.kde&#8221;目录的所有者，哦？检查……&#8221;~/.kde&#8221;这个目录竟然是root的，原来是权限的问题。</p>

<p>输入&#8221;chown -R owner ~/.kde&#8221;，为了保险，再加个&#8221;chgrp -R group ~/.kde&#8221;，这里面的&#8221;owner&#8221;和&#8221;group&#8221;分别是当前的用户名和用户所在的组名。</p>

<p>之后重新进入KDE，一切正常！</p>

<p>PS：新的KDE环境确实做的不错，桌面右上角的widget加上suse的主菜单非常赞</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2008-07-19T17:20:00+08:00" data-updated="true" itemprop="datePublished">Jul 19<span>th</span>, 2008</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/linux/'>Linux</a>


</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2008/07/19/convert-cue-and-bin-to-iso-format-in-linux/" itemprop="url">Linux下将.cue/.bin转换为.iso的方法</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>从学校的FTP上下了个Windows 2000 Advance Server光盘镜像，打算装在虚拟机里，结果发现下下来的镜像是.cue/.bin格式的，VirtualBox还用不了，于是跑google上搜了一大堆linux里转换.iso格式的软件，发现一个叫&#8221;bchunk&#8221;的小软件非常好用，而且小的可以，才几十K，很不错。</p>

<p>在终端里输入如下命令：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>bchunk e-w2sp4ru1as.bin e-w2sp4ru1as.cue e-w2sp4ru1as.iso</span></code></pre></td></tr></table></div></figure>


<p>其中，e-w2sp4ru1as.e-w2sp4ru1as.cue是原来的镜像名，e-w2sp4ru1as.iso是转换后想要保存的文件名。</p>

<p>等一小会儿，就像下面这幅图一样，会有一个进度条，进度到100%后转换就完成了。
<img class="center" src="/images/articles/200807/convert_cue_and_bin_to_iso_format_in_linux.png" title="Convert CUE and BIN to ISO format" ></p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2008-07-18T20:48:00+08:00" data-updated="true" itemprop="datePublished">Jul 18<span>th</span>, 2008</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/linux/'>Linux</a>


</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2008/07/18/slove-the-problem-of-new-version-virtualbox-can-not-start-virtual-machine-in-fedora/" itemprop="url">新版VirtualBox在Fedora下不能启动虚拟机的解决办法</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>前一段时间突然发现VirtualBox被Sun收购了，改名成&#8221;Sun xVM VirtualBox&#8221;，于是兴致勃勃的安上了最新版，结果发现虚拟机启动不了了，提示错误：</p>

<pre><code>VirtualBox kernel driver not installed. The vboxdrv kernel module was either not loaded or /dev/vboxdrv was not created for some reason. 
Re-setup the kernel module by executing ‘/etc/init.d/vboxdrv setup’ as root.
</code></pre>

<p>于是按照提示在终端里执行&#8221;sudo /etc/init.d/vboxdrv setup&#8221;时，却又提示VirtualBox的内核模块无法编译，查看日志发现是没有安装内核源代码。</p>

<p>于是执行&#8221;sudo yum install kernel-devel&#8221;，等待系统自动下载并安装。注意这里我用的Linux是Fedora，如果是其它发行版可以执行相应的安装命令，唯一相同的是软件包&#8221;kernel-devel&#8221;名字不变。</p>

<p>安装完成后，再次执行&#8221;sudo /etc/init.d/vboxdrv setup&#8221;，搞定！</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2008-04-02T12:21:00+08:00" data-updated="true" itemprop="datePublished">Apr 2<span>nd</span>, 2008</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/android/'>Android</a>


</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2008/04/02/mark-breakthrough-for-dimensional-bar-code-decoder/" itemprop="url">二维条码终于有了突破!</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>自己改写了几个类，这几天不停的测试测试测试，今天终于成功解码，不过因为字符编码还没彻底弄好，所以解出来的还都是乱码，不过英文已经可以解析出来了，值得纪念的一天!</p>

<p><img class="center" src="/images/articles/200804/mark_breakthrough_for_dimensional_bar_code_decoder.png" title="Breakthrough for Dimensional Bar Code Decoder" ></p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2008-03-20T15:08:00+08:00" data-updated="true" itemprop="datePublished">Mar 20<span>th</span>, 2008</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/programming/'>Programming</a>


</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2008/03/20/compilation-failed-due-to-character-encoding/" itemprop="url">因字符编码导致的编译不通过</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>从网上下了QR标准的二维码库，打算直接调用里面的类来实现。在Fedora下Java编译通过，只是提示了一下使用了过时的方法。但我把代码复制到Windows里时，却编译不同过，出现了近1k个错误，代码完全一样，只是操作系统不同就会出问题？</p>

<p>回想在Windows里用UltraEdit打开时，提示文件不是&#8221;DOS Format&#8221;，会不会和文字编码有关？Linux用的是UTF-8的编码，而Windows用的是GBK的编码，难道字符编码必须要和本地相同才能编译通过么？试一下，于是把代码用UltraEdit转换成了GBK编码，再次编译，终于正常通过。</p>

<p>看来有时编译不通过不一定是语句问题，连文件的编码也有可能出问题，如果在不同系统中出现类似上面一个正常一个错误的情况，可以考虑看是不是因为文件的编码和系统默认的编码有差异而引起的。</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2008-02-17T21:28:00+08:00" data-updated="true" itemprop="datePublished">Feb 17<span>th</span>, 2008</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/linux/'>Linux</a>


</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2008/02/17/disable-automatically-mount-partitions-under-fedora/" itemprop="url">Fedora禁止自动挂载分区的方法</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>Fedora在启动时会自动把系统中的其它分区挂载，为了对自动挂载的分区进行一定的限制，就要改变相应的策略，这一策略存放在&#8221;/usr/share/hal/fdi/policy/10osvendor/20-storage-methods.fdi&#8221;文件中。</p>

<p>找到以下提示行</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;!-- Here follow volumes we specifically want to ignore - it is the --&gt;
</span><span class='line'>&lt;!-- responsibility of software higher in the stack (e.g. gnome-vfs) --&gt;
</span><span class='line'>&lt;!-- amd mount programs (e.g. Mount() on HAL) to respect volume.ignore --&gt;
</span><span class='line'>&lt;merge key="volume.ignore" type="bool"&gt;false&lt;/merge&gt;</span></code></pre></td></tr></table></div></figure>


<p>按照说明在提示之后添加对磁盘挂载的策略即可，比如我自己的硬盘就是</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;match key="volume.fstype" string="vfat"&gt;
</span><span class='line'>  &lt;match key="volume.label" string="DATA"&gt;
</span><span class='line'>    &lt;merge key="volume.ignore" type="bool"&gt;true&lt;/merge&gt;
</span><span class='line'>  &lt;/match&gt;
</span><span class='line'>  &lt;match key="volume.label" string="MULTI"&gt;
</span><span class='line'>    &lt;merge key="volume.ignore" type="bool"&gt;true&lt;/merge&gt;
</span><span class='line'>  &lt;/match&gt;
</span><span class='line'>  &lt;match key="volume.label" string="BACKUP"&gt;
</span><span class='line'>    &lt;merge key="volume.ignore" type="bool"&gt;true&lt;/merge&gt;
</span><span class='line'>  &lt;/match&gt;
</span><span class='line'>&lt;/match&gt;</span></code></pre></td></tr></table></div></figure>


<p>其中&#8221;volume.fstype&#8221;后面的值就是匹配的文件系统，&#8221;volume.label&#8221;后面的值是匹配的卷标，&#8221;volume.ignore&#8221;中的参数是&#8221;true&#8221;，意思是忽略被匹配的分区。</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2008-02-15T20:16:00+08:00" data-updated="true" itemprop="datePublished">Feb 15<span>th</span>, 2008</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/linux/'>Linux</a>


</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2008/02/15/slove-the-problem-on-install-ntfs-3g/" itemprop="url">解决安装ntfs-3g时遇到的问题</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>今天安装了CentOS，结果发现好多软件源里都没有，看来又要手动安装了，为了挂载ntfs分区，跑去<a href="http://www.ntfs-3g.org">http://www.ntfs-3g.org</a>下载ntfs-3g，安装好后，试图执行&#8221;mount -t ntfs-3g /dev/hdc5 /media/wdata&#8221;，结果提示：</p>

<pre><code>FATAL: Module fuse not found.
fuse: device not found, try 'modprobe fuse' first
</code></pre>

<p>冷不丁的冒出这么个错误提示，有点措手不及的感觉，于是按照提示执行&#8221;modprobe fuse&#8221;，结果又出来：</p>

<pre><code>FATAL: Module fuse not found.
</code></pre>

<p>没有fuse模块？用Google搜到了<a href="http://fuse.sourceforge.net">http://fuse.sourceforge.net</a>，看上面说明的意思是说fuse(Filesystem in Userspace)是个库，提供了API供用户开发文件系统，看样子通过它开发文件系统又会方便不少，最后只要连接到fuse库上就可以了。呵呵，不管怎么说先下载了安装再说，这些以后有时间再慢慢研究吧。下载后解压，执行下面的命令编译安装fuse：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>./configure
</span><span class='line'>make
</span><span class='line'>make install</span></code></pre></td></tr></table></div></figure>


<p>装好后再次执行mount命令，完成！</p>

		
		
	</div>

</article>

</div>
<nav id="pagenavi">
    
    
        <a href="/blog/page/2/" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav></div>
			</div>
			<footer id="footer" class="inner"><p>
  Copyright &copy; 2008 - Wang Tao -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

Design credit: <a href="http://shashankmehta.in/archive/2012/greyshade.html">Shashank Mehta</a></footer>
			

<script type="text/javascript">
      var disqus_shortname = 'hutaow';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>







		</div>
	</div>
</body>
</html>
